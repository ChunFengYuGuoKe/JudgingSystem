# JudgingSystem接口文档-V1.1

## 1. 题库管理

### 1.1 题目列表查询

#### 1.1.1 基本信息

> 请求路径：/homework/{id_lang}
>
> 请求方式：GET
>
> 接口描述：查询某一语言模块所有题目列表

#### 1.1.2 请求参数

参数格式：路径参数

参数说明：

| 名称    | 类型 | 是否必须 | 备注   |
| ------- | ---- | -------- | ------ |
| id_lang | int  | true     | 语言id |

#### 1.1.3 响应数据

参数格式：application/json

参数说明：

| 名称     | 类型     | 是否必须 | 默认值 | 备注                              | 其他信息 |
| -------- | -------- | -------- | ------ | --------------------------------- | -------- |
| code     | int      | 必须     |        | 状态码+业务码+响应码(1成功 0失败) |          |
| msg      | string   | 非必须   |        | 提示信息                          |          |
| data     | object[] | 非必须   |        | 返回的数据                        |          |
| \|-id    | int      | 必须     |        | 作业id                            |          |
| \|-title | string   | 必须     |        | 作业标题                          |          |

响应数据样例：

```json
{
  "code": 200111,
  "msg": "success",
  "data": [
      {
          "id": 1,
          "title": "两数之和"
      },
      {
          "id": 2,
          "title": "N皇后"
      }
  ]
}
```



### 1.2 根据ID查询题目

#### 1.2.1 基本信息

> 请求路径：/homework/{id_lang}/{id_homework}
>
> 请求方式：GET
>
> 接口描述：根据ID查询某一语言某一题目具体信息 

#### 1.2.2 请求参数

参数格式：路径参数

参数说明：

| 名称        | 类型 | 是否必须 | 备注   |
| ----------- | ---- | -------- | ------ |
| id_lang     | int  | true     | 语言id |
| id_homework | int  | true     | 作业id |

#### 1.2.3 响应数据

参数格式：application/json

参数说明：

| 名称           | 类型   | 是否必须 | 默认值 | 备注                              | 其他信息 |
| -------------- | ------ | -------- | ------ | --------------------------------- | -------- |
| code           | int    | 必须     |        | 状态码+业务码+响应码(1成功 0失败) |          |
| msg            | string | 非必须   |        | 提示信息                          |          |
| data           | object | 非必须   |        | 返回的数据                        |          |
| \|-id          | int    | 必须     |        | 作业id                            |          |
| \|-title       | string | 必须     |        | 作业标题                          |          |
| \|-description | string | 必须     |        | 题目描述                          |          |

响应数据样例：

```json
{
    "code": 200121,
    "msg": "success",
    "data": {
        "id": 1,
        "title": "两数之和",
        "description": "给两个整数A、B，输出A+B"
    }
}
```



### 1.3 新增题目

#### 1.3.1 基本信息

> 请求路径：/homework/add/
>
> 请求方式：POST
>
> 接口描述：新增题目（发布作业）

#### 1.3.2 请求参数

参数格式：multipart/form-data

参数说明：

| 名称        | 类型   | 是否必须 | 备注     |
| ----------- | ------ | -------- | -------- |
| title       | string | 必须     | 作业标题 |
| description | string | 必须     | 题目描述 |
| language    | int    | 必须     | 语言编号 |
| solution    | file   | 必须     | 参考答案 |
| usecases    | file   | 必须     | 测试用例 |

#### 1.3.3 响应数据

参数格式：application/json

参数说明：

| 名称 | 类型   | 是否必须 | 默认值 | 备注                              | 其他信息 |
| ---- | ------ | -------- | ------ | --------------------------------- | -------- |
| code | int    | 必须     |        | 状态码+业务码+响应码(1成功 0失败) |          |
| msg  | string | 非必须   |        | 提示信息                          |          |

响应数据样例：

```json
{
    "code": 200131,
    "msg": "success"
}
```



### 1.4 删除题目

#### 1.4.1 基本信息

> 请求路径：/homework/{id_homework}
>
> 请求方式：delete
>
> 接口描述：删除某个题目

#### 1.4.2 请求参数

参数格式：application/json

参数说明：

| 名称        | 类型 | 是否必须 | 备注   |
| ----------- | ---- | -------- | ------ |
| id_homework | int  | 必须     | 作业id |

#### 1.4.3 响应数据

参数格式：application/json

参数说明：

| 名称 | 类型   | 是否必须 | 默认值 | 备注                              | 其他信息 |
| ---- | ------ | -------- | ------ | --------------------------------- | -------- |
| code | int    | 必须     |        | 状态码+业务码+响应码(1成功 0失败) |          |
| msg  | string | 非必须   |        | 提示信息                          |          |

响应数据样例：

```json
{
	"code": 200141,
	"msg": "success"
}
```



## 2. 学生管理

### 2.1 查询所有学生

#### 2.1.1 基本信息

> 请求路径：/students/{id_class}
>
> 请求方式：GET
>
> 接口描述：获取某语言某班级的学生列表 

#### 2.1.2 请求参数

参数格式：路径参数

参数说明：

| 名称     | 类型   | 是否必须 | 备注   |
| -------- | ------ | -------- | ------ |
| id_class | string | 必须     | 班级号 |

#### 2.1.3 响应数据

参数格式：application/json

参数说明：

| 名称    | 类型     | 是否必须 | 默认值 | 备注                              | 其他信息 |
| ------- | -------- | -------- | ------ | --------------------------------- | -------- |
| code    | int      | 必须     |        | 状态码+业务码+响应码(1成功 0失败) |          |
| msg     | string   | 非必须   |        | 提示信息                          |          |
| data    | object[] | 非必须   |        | 返回的数据                        |          |
| \|-id   | string   | 必须     |        | 学生id                            |          |
| \|-name | string   | 必须     |        | 学生姓名                          |          |

响应数据样例：

```json
{
    "code": 200211,
    "msg": "success",
    "data": [
        {
            "id": "2021141410010",
            "name": "小黑"
        },
        {
            "id": "2021141410011",
            "name": "一锅"
        }
    ]
}
```



## 3.班级管理

### 3.1 查询所有班级

#### 3.1.1 基本信息

> 请求路径：/classes/{id_teacher}
>
> 请求方式：GET
>
> 接口描述：列出该教师管理的所有班级

#### 3.1.2 请求参数

参数格式：路径参数

参数说明：

| 名称       | 类型   | 是否必须 | 备注   |
| ---------- | ------ | -------- | ------ |
| id_teacher | string | 必须     | 教师id |

#### 3.1.3 响应数据

参数格式：application/json

参数说明：

| 名称      | 类型     | 是否必须 | 默认值 | 备注                                | 其他信息 |
| --------- | -------- | -------- | ------ | ----------------------------------- | -------- |
| code      | int      | 必须     |        | 状态码+业务码+结果码(1成功  0 失败) |          |
| msg       | string   | 非必须   |        | 提示信息                            |          |
| data      | object[] | 非必须   |        | 返回的数据                          |          |
| \|- id    | string   | 必须     |        | 班级号                              |          |
| \|- count | int      | 必须     |        | 学生数量                            |          |

响应数据样例：

```json
{
    "code": 200311,
    "msg": "success",
    "data": [
        {
            "id": "210110101",
            "count": 30
        },
        {
            "id": "210110102",
            "count": 35
        }
    ]
}
```



### 3.2 查询特定班级

#### 3.2.1 基本信息

> 请求路径：/classes/{id_teacher}/{id_class}
>
> 请求方式：GET
>
> 接口描述：根据ID查询某教师某班级

#### 3.2.2 请求参数

参数格式：路径参数

参数说明：

| 名称       | 类型   | 是否必须 | 备注   |
| ---------- | ------ | -------- | ------ |
| id_teacher | string | 必须     | 教师id |
| id_class   | string | 必须     | 班级号 |

#### 3.2.3 响应数据

参数格式：application/json

参数说明：

| 名称      | 类型     | 是否必须 | 默认值 | 备注                              | 其他信息 |
| --------- | -------- | -------- | ------ | --------------------------------- | -------- |
| code      | int      | 必须     |        | 状态码+业务码+响应码(1成功 0失败) |          |
| msg       | string   | 非必须   |        | 提示信息                          |          |
| data      | object[] | 非必须   |        | 返回的数据                        |          |
| \|- id    | string   | 必须     |        | 学生id                            |          |
| \|- score | double   | 必须     |        | 学生分数                          |          |

响应数据样例：

```json
{
    "code": 200311,
    "msg": "success",
    "data": [
        {
            "id": "210110101",
            "score": 100
        },
        {
            "id": "210110102",
            "score": 80.5
        }
    ]
}
```





## 4. 作业管理

### 4.1 提交作业

#### 4.1.1 基本信息

> 请求路径：/submits
>
> 请求方式：POST
>
> 接口描述：该接口用于学生提交题目

#### 4.1.2 请求参数

参数格式：multipart/form-data

参数说明：

| 名称        | 类型 | 是否必须 | 备注     |
| ----------- | ---- | -------- | -------- |
| id_stu      | int  | 必须     | 学生id   |
| id_homework | int  | 必须     | 作业id   |
| id_lang     | int  | 必须     | 语言id   |
| code        | file | 必须     | 代码文件 |

#### 4.1.3 响应数据

参数格式：application/json

参数说明：

| 名称  | 类型   | 是否必须 | 默认值 | 备注                              | 其他信息 |
| ----- | ------ | -------- | ------ | --------------------------------- | -------- |
| code  | int    | 必须     |        | 状态码+业务码+响应码(1成功 0失败) |          |
| msg   | string | 非必须   |        | 提示信息                          |          |
| data  | object | 非必须   |        | 返回的数据                        |          |
| \|-id | string | 必须     |        | 提交记录id                        |          |

响应数据样例：

```json
{
    "code": 200231,
    "msg": "success",
    "data": {
        "id": "4100010101"
    }
}
```



### 4.2 查询提交结果

#### 4.2.1 基本信息

> 请求路径：/submits/{id_submit}
>
> 请求方式：GET
>
> 接口描述：获取提交结果 

#### 4.2.2 请求参数

参数格式：路径参数

参数说明：

| 名称      | 类型 | 是否必须 | 备注       |
| --------- | ---- | -------- | ---------- |
| id_submit | int  | 必须     | 提交记录id |

#### 4.2.3 响应数据

参数格式：application/json

参数说明：

| 名称     | 类型   | 是否必须 | 默认值 | 备注                              | 其他信息    |
| -------- | ------ | -------- | ------ | --------------------------------- | ----------- |
| code     | int    | 必须     |        | 状态码+业务码+响应码(1成功 0失败) |             |
| msg      | string | 非必须   |        | 提示信息                          |             |
| data     | object | 非必须   |        | 返回的数据                        |             |
| \|-id    | int    | 必须     |        | 作业id                            |             |
| \|-title | string | 必须     |        | 作业标题                          |             |
| \|-black | string | 必须     | N/A    | 通过的测试点/总测试点             |             |
| \|-white | string | 必须     |        | 白盒测试返回的信息                |             |
| \|-score | int    | 必须     |        | 得分                              | 限制在0~100 |

响应数据样例：

```json
{
    "code": 200421,
    "msg": "success",
    "data": {
        "id": 1,
        "title": "两数之和",
        "black": "10/10",
        "white": "你的代码很完美",
        "score": 100
    }
}
```



### 4.3 查询所有提交记录

#### 4.3.1 基本信息

> 请求路径：/submits/{id_stu}/{id_lang}
>
> 请求方式：GET
>
> 接口描述：获取该学生的所有题目最近一次提交记录

#### 4.3.2 请求参数

参数格式：路径参数

参数说明：

| 名称    | 类型 | 是否必须 | 备注   |
| ------- | ---- | -------- | ------ |
| id_stu  | int  | 必须     | 学生id |
| id_lang | int  | 必须     | 语言id |

#### 4.3.3 响应数据

参数格式：application/json

参数说明：

| 名称         | 类型     | 是否必须 | 默认值 | 备注                              | 其他信息    |
| ------------ | -------- | -------- | ------ | --------------------------------- | ----------- |
| code         | int      | 必须     |        | 状态码+业务码+响应码(1成功 0失败) |             |
| msg          | string   | 非必须   |        | 提示信息                          |             |
| data         | object[] | 非必须   |        | 返回的数据                        |             |
| \|-id_submit | int      | 必须     |        | 提交记录id                        |             |
| \|-title     | string   | 必须     |        | 作业标题                          |             |
| \|-score     | int      | 必须     |        | 得分                              | 限制在0~100 |

响应数据样例：

```json
{
  "code": 200431,
  "msg": "success",
  "data": [
      {
          "id_submit": 1,
          "title": "A+B",
          "score": 100
      },
      {
          "id_submit": 2,
          "title": "N皇后",
          "score": 80
      }
  ]
}
```



### 4.4 排行榜查询

#### 4.4.1 基本信息

> 请求路径：/rank/{id_lang}
>
> 请求方式：GET
>
> 接口描述：获取该语言的所有学生总分排行榜（降序） 

#### 4.4.2 请求参数

参数格式：路径参数

参数说明：

| 名称    | 类型 | 是否必须 | 备注   |
| ------- | ---- | -------- | ------ |
| id_lang | int  | 必须     | 语言id |

#### 4.4.3 响应数据

参数格式：application/json

参数说明：

| 名称     | 类型     | 是否必须 | 默认值 | 备注                              | 其他信息 |
| -------- | -------- | -------- | ------ | --------------------------------- | -------- |
| code     | int      | 必须     |        | 状态码+业务码+响应码(1成功 0失败) |          |
| msg      | string   | 非必须   |        | 提示信息                          |          |
| data     | object[] | 非必须   |        | 返回的数据                        |          |
| \|-id    | string   | 必须     |        | 学生id                            |          |
| \|-class | string   | 必须     |        | 学生班级                          |          |
| \|-score | int      | 必须     |        | 所有题目得分总分                  |          |

响应数据样例：

```json
{
  "code": 200441,
  "msg": "success",
  "data": [
      {
          "id": "2021141410001",
          "class": "20210101",
          "score": 200
      },
      {
          "id": "2021141410002",
          "class": "20210101",
          "score": 180
      }
  ]
}
```



## 5. 其他接口

### 5.1 登录

#### 5.1.1 基本信息

> 请求路径：/login
>
> 请求方式：POST
>
> 接口描述：该接口用于用户登录系统，登录完毕后，系统下发JWT令牌。 

#### 5.1.2 请求参数

参数格式：application/json

参数说明：

| 名称     | 类型   | 是否必须 | 备注                      |
| -------- | ------ | -------- | ------------------------- |
| user_id  | string | 必须     | 用户名                    |
| password | string | 必须     | 密码                      |
| identity | int    | 必须     | 登录身份, 1 学生； 2 教师 |

请求数据样例：

```json
{
	"user_id": "jinyong",
    "password": "123456",
    "identity": "1"
}
```



#### 5.1.3 响应数据

参数格式：application/json

参数说明：

| 名称 | 类型   | 是否必须 | 默认值 | 备注                              | 其他信息 |
| ---- | ------ | -------- | ------ | --------------------------------- | -------- |
| code | number | 必须     |        | 状态码+业务码+响应码(1成功 0失败) |          |
| msg  | string | 非必须   |        | 提示信息                          |          |
| data | string | 必须     |        | 返回的数据 , jwt令牌              |          |

响应数据样例：

```json
{
  "code": 200511,
  "msg": "success",
  "data": "eyJhbGciOiJIUzI1NiJ9.eyJuYW1lIjoi6YeR5bq4IiwiaWQiOjEsInVzZXJuYW1lIjoiamlueW9uZyIsImV4cCI6MTY2MjIwNzA0OH0.KkUc_CXJZJ8Dd063eImx4H9Ojfrr6XMJ-yVzaWCVZCo"
}
```

#### 4.1.4 备注说明

> 用户登录成功后，系统会自动下发JWT令牌，然后在后续的每次请求中，都需要在请求头header中携带到服务端，请求头的名称为 token ，值为 登录时下发的JWT令牌。
>
> 如果检测到用户未登录，则会返回如下固定错误信息：
>
> ```json
> {
> 	"code": 0,
> 	"msg": "NOT_LOGIN",
> 	"data": null
> }
> ```



### 5.2 获取已有插件信息

#### 5.2.1 基本信息

> 请求路径：/plugin
>
> 请求方式：GET
>
> 接口描述：该接口用于获取系统已有插件 

#### 5.2.2 响应数据

参数格式：application/json

参数说明：

| 名称    | 类型     | 是否必须 | 默认值 | 备注                              | 其他信息 |
| ------- | -------- | -------- | ------ | --------------------------------- | -------- |
| code    | int      | 必须     |        | 状态码+业务码+响应码(1成功 0失败) |          |
| msg     | string   | 非必须   |        | 提示信息                          |          |
| data    | object[] | 非必须   |        | 返回的数据                        |          |
| \|-name | string   | 必须     |        | 插件名称                          |          |
| \|-id   | int      | 必须     |        | 插件id                            |          |

响应数据样例：

```json
{
  "code": 200521,
  "msg": "success",
  "data": [
      {
          "name": "Java",
          "id": 1
      },
      {
          "name": "Python",
          "id": 2
      },
      {
          "name": "Shell",
          "id": 3
      }
  ]
}
```

